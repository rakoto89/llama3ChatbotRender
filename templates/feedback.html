<!DOCTYPE html> 
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Rate your experience</title>
   <link rel="stylesheet" href="{{ url_for('static', filename='feedback.css') }}">
</head>
<body>
   <div class="feedback-container">
       <div class="feedback-card">
           <h1>Rate your experience</h1>
           <p>We highly value your feedback! Rate your experience and provide us with your valuable feedback.</p>

           <form id="feedback-form" method="POST" action="/feedback">
               <!-- Emoji Rating Section -->
               <div class="emoji-rating">
                   <input type="radio" id="rating-5" name="rate" value="5">
                   <label for="rating-5"><span>😊</span> 5 Stars</label>

                   <input type="radio" id="rating-4" name="rate" value="4">
                   <label for="rating-4"><span>🙂</span> 4 Stars</label>

                   <input type="radio" id="rating-3" name="rate" value="3">
                   <label for="rating-3"><span>😐</span> 3 Stars</label>

                   <input type="radio" id="rating-2" name="rate" value="2">
                   <label for="rating-2"><span>🙁</span> 2 Stars</label>

                   <input type="radio" id="rating-1" name="rate" value="1">
                   <label for="rating-1"><span>😡</span> 1 Star</label>
               </div>

               <!-- Text Box for Additional Comments -->
               <textarea id="comments" name="comments" rows="4" placeholder="Write your feedback here..."></textarea>

               <!-- Button Section -->
               <div class="button-container">
                   <button type="submit" class="btn-submit">Send Feedback</button>
                   <button type="button" id="return-chatbot" class="btn-return">Return to Chatbot</button>
                   <button type="button" id="skip-feedback" class="btn-skip">Skip Feedback</button>
               </div>
           </form>

           <div id="success-message" style="display: none;">
               <p>Thank you for your feedback! 🙌</p>
           </div>
       </div>
   </div>

   <script>
       // Handle Feedback Form Submission
       document.getElementById("feedback-form").onsubmit = function(event) {
           event.preventDefault();

           const formData = new FormData(event.target);

           fetch("/feedback", {
               method: "POST",
               body: formData
           })
           .then(response => response.text())
           .then(data => {
               document.getElementById("success-message").style.display = "block";
           })
           .catch(error => console.error("Error:", error));
       };

       // Return to chatbot function
       document.getElementById("return-chatbot").addEventListener("click", function() {
           window.location.href = "/chatbot";  // Update this URL to match your chatbot route
       });

       // Skip feedback and go back to chatbot
       document.getElementById("skip-feedback").addEventListener("click", function() {
           window.location.href = "/chatbot";  // Update this URL to match your chatbot route
       });
   </script>
</body>
</html>
